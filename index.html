<!DOCTYPE html>
<html>
<head>
	<title>StreamApp</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href = "assets/css/bootstrap.min.css">
	<link href="//vjs.zencdn.net/4.12/video-js.css" rel="stylesheet">
<!-- 	<link href="assets/videojs-sublime-skin.min.css" rel="stylesheet"> -->
    <style>
        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
            display: none !important;
        }
    </style>
</head>
<body ng-app="StreamApp" ng-controller="playerController" >
    <nav class="navbar navbar-fixed-top" ng-controller="indexController" >
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> StreamApp</a>
            </div>
            <p class="navbar-text  navbar-right" ng-hide="isAdmin()">
                <a href="#" ng-click="showLogin()" ng-cloak><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Control panel</a>
            </p>
            <!--<p class="navbar-text  navbar-right"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> stream.tekoone.ru </p>-->
            <div ng-cloak>
                <ul class="nav navbar-nav">
                    <li ng-show="isAdmin()">
                        <div style="width: 300px; padding-right: 15px; padding-left: 15px; margin-bottom: -15px;">
                            <span class="glyphicon glyphicon-hdd" aria-hidden="true"></span> {{disk.used}}gb <span class="pull-right">{{disk.free}}gb</span>
                            <div class="progress progress-striped active" >
                                <div class="progress-bar" style="width: {{disk.percent}}%"></div>
                            </div>
                        </div>
                    </li>
                    <li ng-show="isAdmin()">
                        <div style="width: 100px; padding-right: 15px; padding-left: 15px; margin-bottom: -15px;">
                            <span class="glyphicon glyphicon-stats" aria-hidden="true"></span> CPU
                            <div class="progress progress-striped active" >
                                <div class="progress-bar progress-bar-info" style="width: {{cpu}}%"></div>
                            </div>
                        </div>
                    </li>
                    <li ng-show="isAdmin()">
                        <div style="width: 100px; padding-right: 15px; padding-left: 15px; margin-bottom: -15px;">
                            <span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> RAM
                            <div class="progress progress-striped active" >
                                <div class="progress-bar progress-bar-success" style="width: {{memory}}%"></div>
                                <div class="progress-bar progress-bar-warning" style="width: {{cache}}%"></div>
                            </div>
                        </div>
                    </li>
                    <!--<li><a >{{disk.free}} gb</a></li>-->
                    <!--<li><a ui-sref="player">player</a></li>-->
                    <!--<li><a href="#" ng-click="admin()">admin</a></li> &ndash;&gt;-->
                 </ul>
            </div>
        </div>
    </nav>

    <hr>
    <div class="container" style = "padding-top: 20px" >
        <div class="row">
            <div class="col-md-8" ng-cloak>
                <span class="label label-danger" ng-show="isLive" >Video: {{ currentVideo }}</span>
                <span class="label label-primary" ng-hide="isLive" >Video: {{ currentVideo }}</span>
                <video id="myplayer" class="video-js vjs-default-skin" controls autoplay width="100%" height="420">
                    <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
                </video>
            </div>
            <div class="col-md-4" style = "padding-top: 20px" ng-cloak>
                <div ng-show="isLiveOnline"><a class="btn btn-danger btn-lg btn-block"  href="#/live" ng-click="live()">
                    <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Live Streaming ({{countLive}} <span class="glyphicon glyphicon-user" aria-hidden="true"></span>)</a></div>
                <div ng-hide="isLiveOnline"><a class="btn btn-danger btn-lg btn-block" disabled>
                    <span class="glyphicon glyphicon-pause" aria-hidden="true"></span> Live Streaming</a>
                </div>
                <table class="table table-striped" >
                    <thead>
                    <tr>
                      <th>Last videos</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="video in videos">
                        <td><img ng-src="{{ video.img }}"/> <a href="#/{{ video.name }}" ng-click="play(video.src)">
                            <span class="glyphicon glyphicon-play" aria-hidden="true"></span> {{ video.name }}</a></td>
                        <td><a href="#" class="btn btn-danger btn-sm" ng-click="delete(video.name)" ng-show="isAdmin()"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <hr>
    <div class="text-center text-disabled">
        <small>Copyright Â© 2015 <a href="http://teseyko.com/" target="_blank">Alexander Teseyko</a> Powered by <a href="http://www.videojs.com/" target="_blank">Video.js</a>.</small>
    </div>

    <modal title="Login" visible="showModalLogin" ng-cloak>
        <form class="form-horizontal">
            <fieldset>
                <div class="form-group">
                    <div class="col-md-12 controls">
                        <input id="user" type="text" placeholder="User" class="form-control input-md"
                               data-ng-model="loginData.user" required autofocus>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 controls">
                        <input id="pass" type="password" placeholder="Password" class="form-control input-md"
                               data-ng-model="loginData.pass" required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 controls text-center">
                        <button id="loginbtn" class="btn btn-primary" type="submit" data-ng-click="login()">
                            <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> Login</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </modal>

    <script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="video.dev.js"></script>
		<script src="js/videojs-media-sources.js"></script>
		<script src="js/videojs-hls.js"></script>
    <script src= "https://code.angularjs.org/1.3.15/angular.min.js"></script>
    <script src="js/angular-local-storage.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
